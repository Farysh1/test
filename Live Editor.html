<!DOCTYPE html>
<html>

<head>
    <title>Live Editor</title>
    <style>
        .top-bar {
            display: flex;
            justify-content: space-around;
            padding: 10px;
            background-color: #f8f9fa;
            border: 2px solid #000;
        }

        .icon {
            cursor: pointer;
        }

        .separator {
            border-left: 2px solid #000;
            height: 30px;
            margin: 0 10px;
        }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>

<body>
    <div class="top-bar">
        <div class="icon" id="addText">
            <!-- Replace with your icon -->
            <img src="text-icon.png" alt="Add Text">
        </div>
        <div class="icon" id="addImage">
            <!-- Replace with your icon -->
            <img src="image-icon.png" alt="Add Image">
        </div>
        <div class="separator"></div>
        <div class="icon" id="savePresentation">
            <!-- Replace with your icon -->
            <img src="save-icon.png" alt="Save Presentation">
        </div>
        <div class="icon" id="loadPresentation">
            <!-- Replace with your icon -->
            <img src="load-icon.png" alt="Load Presentation">
        </div>
    </div>
    <div id="slideContainer">
        <!-- The slides will be added here -->
    </div>
    <div id="presentationPreview">
        <!-- The preview of the presentation will be generated here -->
    </div>
    <script>
        document.getElementById('addText').addEventListener('click', function () {
            // Create a new text element
            var textElement = document.createElement('p');
            textElement.textContent = 'New Text Element';
            textElement.contentEditable = true; // Make the text element editable
            // Add the text element to the slide container
            document.getElementById('slideContainer').appendChild(textElement);
        });

        document.getElementById('addImage').addEventListener('click', function () {
            // Create a new image element
            var imageElement = document.createElement('img');
            imageElement.src = 'image-url.png'; // Replace with your image URL
            // Add the image element to the slide container
            document.getElementById('slideContainer').appendChild(imageElement);
        });

        document.getElementById('savePresentation').addEventListener('click', function () {
            // Get all the elements in the slide container
            var slideElements = document.getElementById('slideContainer').children;
            var slides = [];
            // Convert each element to a JSON format
            for (var i = 0; i < slideElements.length; i++) {
                var element = slideElements[i];
                if (element.tagName === 'P') {
                    // This is a text element
                    slides.push({
                        content: element.textContent,
                    });
                } else if (element.tagName === 'IMG') {
                    // This is an image element
                    slides.push({
                        image: element.src,
                        imageAlt: 'Slide ' + (i + 1) + ' Image',
                        position: 'absolute',
                        left: element.offsetLeft + 'px',
                        top: element.offsetTop + 'px',
                        imageWidth: element.width + 'px',
                        imageHeight: element.height + 'px'
                    });
                }
            }
            // Convert the slides to a JSON string
            var json = JSON.stringify({ slides: slides });
            // Create a blob from the JSON string
            var blob = new Blob([json], { type: "application/json" });
            // Create a link element
            var url = URL.createObjectURL(blob);
            var link = document.createElement('a');
            link.href = url;
            link.download = 'presentation.json';
            // Append the link to the body (required for Firefox)
            document.body.appendChild(link);
            // Simulate a click on the link
            link.click();
            // Remove the link from the body
            document.body.removeChild(link);
        });

        document.getElementById('loadPresentation').addEventListener('click', function () {
            // Create a file input element
            var fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.accept = 'application/json';
            // Add an event listener for when a file is selected
            fileInput.addEventListener('change', function (event) {
                var file = event.target.files[0];
                var reader = new FileReader();
                // Add an event listener for when the file is read
                reader.addEventListener('load', function (event) {
                    var json = event.target.result;
                    var slides = JSON.parse(json).slides;
                    // Clear the slide container
                    var slideContainer = document.getElementById('slideContainer');
                    while (slideContainer.firstChild) {
                        slideContainer.removeChild(slideContainer.firstChild);
                    }
                    // Add each slide to the slide container
                    for (var i = 0; i < slides.length; i++) {
                        var slide = slides[i];
                        if (slide.content) {
                            // This is a text slide
                            var textElement = document.createElement('p');
                            textElement.textContent = slide.content;
                            textElement.contentEditable = true; // Make the text element editable
                            slideContainer.appendChild(textElement);
                        } else if (slide.image) {
                            // This is an image slide
                            var imageElement = document.createElement('img');
                            imageElement.src = slide.image;
                            imageElement.alt = slide.imageAlt;
                            imageElement.style.position = slide.position;
                            imageElement.style.left = slide.left;
                            imageElement.style.top = slide.top;
                            imageElement.style.width = slide.imageWidth;
                            imageElement.style.height = slide.imageHeight;
                            slideContainer.appendChild(imageElement);
                        }
                    }
                });
                // Read the file as text
                reader.readAsText(file);
            });
            // Simulate a click on the file input element
            fileInput.click();
        });
    </script>
</body>

</html>